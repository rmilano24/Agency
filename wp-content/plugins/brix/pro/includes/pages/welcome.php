<?php if ( ! defined( 'BRIX' ) ) die( 'Forbidden' );

/**
 * Return the code for the Documentation icon.
 *
 * @since 1.1.3
 * @return string
 */
function brix_docs_icon() {
	$docs_icon ='<?xml version="1.0" encoding="UTF-8" standalone="no"?>';
	$docs_icon .='<svg width="32px" height="32px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">';
	    $docs_icon .='<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">';
	        $docs_icon .='<g id="docs" fill="#000000">';
	            $docs_icon .='<path d="M27.1924883,7.92488263 L27.1924883,4.76995305 L11.1924883,4.76995305 L11.1924883,7.92488263 L27.1924883,7.92488263 Z M20.8075117,20.7699531 L20.8075117,17.5399061 L11.1924883,17.5399061 L11.1924883,20.7699531 L20.8075117,20.7699531 Z M27.1924883,14.3849765 L27.1924883,11.1549296 L11.1924883,11.1549296 L11.1924883,14.3849765 L27.1924883,14.3849765 Z M28.8450704,-0.0375586854 C29.6964038,-0.0375586854 30.435054,0.275429559 31.0610353,0.901406047 C31.6870118,1.52738734 32,2.26603748 32,3.11737089 L32,22.3474178 C32,23.1987512 31.6870118,23.9499202 31.0610353,24.600939 C30.435054,25.2519578 29.6964038,25.5774648 28.8450704,25.5774648 L9.61502347,25.5774648 C8.76369007,25.5774648 8.01252116,25.2519578 7.36150235,24.600939 C6.71048353,23.9499202 6.38497653,23.1987512 6.38497653,22.3474178 L6.38497653,3.11737089 C6.38497653,2.26603748 6.71048353,1.52738734 7.36150235,0.901406047 C8.01252116,0.275429559 8.76369007,-0.0375586854 9.61502347,-0.0375586854 L28.8450704,-0.0375586854 Z M3.15492958,6.34741784 L3.15492958,28.8075117 L25.6150235,28.8075117 L25.6150235,31.9624413 L3.15492958,31.9624413 C2.30359521,31.9624413 1.56494843,31.6494554 0.938967136,31.0234742 C0.312985937,30.3974929 0,29.6588461 0,28.8075117 L0,6.34741784 L3.15492958,6.34741784 Z" id="Page-1"></path>';
	        $docs_icon .='</g>';
	    $docs_icon .='</g>';
	$docs_icon .='</svg>';

	return $docs_icon;
}

/**
 * Return the code for the Support icon.
 *
 * @since 1.1.3
 * @return string
 */
function brix_support_icon() {
	$support_icon = '<?xml version="1.0" encoding="UTF-8" standalone="no"?>';
	$support_icon .= '<svg width="32px" height="32px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">';
	    $support_icon .= '<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">';
	        $support_icon .= '<g id="support" fill="#000000">';
	            $support_icon .= '<path d="M16.0723404,0 C19.7035664,0 22.7900593,1.28225716 25.3319149,3.84680633 C27.8737705,6.41135986 29.1446809,9.48650594 29.1446809,13.0723404 L29.1446809,27.6425532 C29.1446809,28.822701 28.713481,29.8439671 27.8510638,30.706383 C26.9886467,31.5687987 25.9673831,32 24.787234,32 L16.0723404,32 L16.0723404,29.0723404 L26.2170213,29.0723404 L26.2170213,27.6425532 L20.4297872,27.6425532 L20.4297872,16 L26.2170213,16 L26.2170213,13.0723404 C26.2170213,10.2581401 25.2297981,7.86384068 23.2553213,5.88935952 C21.2808402,3.91488272 18.8865408,2.92765957 16.0723404,2.92765957 C13.2581401,2.92765957 10.8638407,3.91488272 8.88935952,5.88935952 C6.91488359,7.86384068 5.92765957,10.2581401 5.92765957,13.0723404 L5.92765957,16 L11.7148936,16 L11.7148936,27.6425532 L7.35744681,27.6425532 C6.17729901,27.6425532 5.15603287,27.2113533 4.29361702,26.3489362 C3.43120135,25.486519 3,24.4652555 3,23.2851064 L3,13.0723404 C3,9.48650594 4.27090949,6.41135986 6.81276596,3.84680633 C9.35462155,1.28225716 12.4411144,0 16.0723404,0 L16.0723404,0 Z" id="Page-1"></path>';
	       $support_icon .= '</g>';
	    $support_icon .= '</g>';
	$support_icon .= '</svg>';

	return $support_icon;
}

/**
 * Return the code for the Updates icon.
 *
 * @since 1.1.3
 * @return string
 */
function brix_updates_icon() {
	$updates_icon = '<?xml version="1.0" encoding="UTF-8" standalone="no"?>';
	$updates_icon .= '<svg width="32px" height="32px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">';
	    $updates_icon .= '<g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">';
	        $updates_icon .= '<g id="updates" fill="#000000">';
	            $updates_icon .= '<path d="M15.6425532,24.7148936 L15.6425532,20.3574468 L21.4297872,26.1446809 L15.6425532,32 L15.6425532,27.6425532 C12.4652337,27.6425532 9.7305088,26.4964662 7.43829787,24.2042575 C5.14608782,21.9120444 4,19.1773195 4,16 C4,13.7304848 4.61275986,11.6652555 5.83829787,9.80425532 L7.94893617,11.9148936 C7.26808162,13.1404299 6.92765957,14.5021189 6.92765957,16 C6.92765957,18.4056854 7.77871469,20.4595679 9.48084889,22.1617043 C11.1829853,23.8638363 13.2368678,24.7148936 15.6425532,24.7148936 L15.6425532,24.7148936 Z M15.6425532,4.35744681 C18.8198727,4.35744681 21.5545976,5.50353375 23.8468107,7.7957425 C26.1390194,10.0879556 27.2851064,12.8226805 27.2851064,16 C27.2851064,18.2695152 26.6723448,20.3347445 25.4468085,22.1957447 L23.3361702,20.0851064 C24.0170256,18.8595701 24.3574468,17.4978811 24.3574468,16 C24.3574468,13.5943146 23.5063895,11.5404321 21.8042575,9.83829569 C20.1021211,8.13616368 18.0482386,7.28510638 15.6425532,7.28510638 L15.6425532,11.6425532 L9.85531915,5.85531915 L15.6425532,0 L15.6425532,4.35744681 Z" id="Page-1"></path>';
	        $updates_icon .= '</g>';
	    $updates_icon .= '</g>';
	$updates_icon .= '</svg>';

	return $updates_icon;
}

/**
 * Render the plugin system status page.
 *
 * @since 1.0.0
 */
function brix_welcome_pro_page( $content ) {
	ob_start();

	$active_tab = isset( $_GET['tab'] ) ? sanitize_text_field( $_GET['tab'] ) : 'brix-tab-panel-docs';

	echo '<div class="brix-admin-page-content">';
		echo '<div class="brix-welcome-section">';
			echo '<span class="brix-welcome-logo"></span>';
			printf( '<h2>%s</h2>', esc_html__( 'Welcome!', 'brix' ) );

			echo '<p>' . __( 'Here\'s some information to get you up and running.', 'brix' ) . '</p>';

			echo '<p>';
				printf( __( 'Don\' forget to register your copy in order to receive automatic updates and <a href="%s">start creating</a> with Brix right now!', 'brix' ),
					admin_url( 'post-new.php?post_type=page' )
				);
			echo '</p>';
		echo '</div>';

		echo '<div class="brix-tabs brix-component brix-docs-support-tabs" data-push="querystring">';
			echo '<ul class="brix-tabs-nav brix-horizontal brix-align-center" role="tablist">';
				$active_class = $active_tab == 'brix-tab-panel-docs' ? 'brix-active' : '';
				printf( '<li><a id="brix-tab-docs" role="tab" aria-controls="brix-tab-panel-docs" class="brix-tab-trigger %s" href="#brix-tab-panel-docs">%s<span>%s</span>%s</a></li>',
					esc_attr( $active_class ),
					brix_docs_icon(),
					esc_html__( 'Docs', 'brix' ),
					esc_html__( 'Read the online documentation and tutorials', 'brix' )
				);

				$active_class = $active_tab == 'brix-tab-panel-support' ? 'brix-active' : '';
				printf( '<li><a id="brix-tab-support" role="tab" aria-controls="brix-tab-panel-support" class="brix-tab-trigger %s" href="#brix-tab-panel-support">%s<span>%s</span>%s</a></li>',
					esc_attr( $active_class ),
					brix_support_icon(),
					esc_html__( 'Need help?', 'brix' ),
					esc_html__( 'We are here for you!', 'brix' )
				);

				$active_class = $active_tab == 'brix-tab-panel-registration' ? 'brix-active' : '';
				printf( '<li><a id="brix-tab-registration" role="tab" aria-controls="brix-tab-panel-registration" class="brix-tab-trigger %s" href="#brix-tab-panel-registration">%s<span>%s</span>%s</a></li>',
					esc_attr( $active_class ),
					brix_updates_icon(),
					esc_html__( 'Registration', 'brix' ),
					esc_html__( 'Register your product to get automatic updates', 'brix' )
				);
			echo '</ul>';

			echo '<div class="brix-tab-container brix-tab-container-loaded">';
				$active_class = $active_tab == 'brix-tab-panel-docs' ? 'brix-active' : '';
				printf( '<div aria-labelledby="brix-tab-docs" id="brix-tab-panel-docs" class="brix-tab %s" role="tabpanel">', esc_attr( $active_class ) );
					brix_docs_page_content();
				echo '</div>';

				$active_class = $active_tab == 'brix-tab-panel-support' ? 'brix-active' : '';
				printf( '<div aria-labelledby="brix-tab-support" id="brix-tab-panel-support" class="brix-tab %s" role="tabpanel">', esc_attr( $active_class ) );
					brix_support_page_content();
				echo '</div>';

				$active_class = $active_tab == 'brix-tab-panel-registration' ? 'brix-active' : '';
				printf( '<div aria-labelledby="brix-tab-registration" id="brix-tab-panel-registration" class="brix-tab %s" role="tabpanel">', esc_attr( $active_class ) );
					brix_registration_page_content();
				echo '</div>';
			echo '</div>';
		echo '</div>';
	echo '</div>';

	$content = ob_get_contents();
	ob_end_clean();

	return $content;
}

add_filter( 'brix_welcome_page', 'brix_welcome_pro_page' );